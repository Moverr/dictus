{"version":3,"sources":["webpack:///./src/routes/settings/roles.vue?aaa7","webpack:///./src/routes/settings/roles.vue?037a","webpack:///src/routes/settings/roles.vue","webpack:///./src/routes/settings/roles.vue?9bce","webpack:///./src/routes/settings/roles.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","breadcrumb","currentProjectKey","slot","key","$t","on","$event","addNew","items","fields","adding","add","model","value","callback","$$v","newName","expression","_e","_v","staticRenderFns","name","metaInfo","title","concat","data","error","roles","computed","_objectSpread","mapState","path","_this","map","role","__link__","id","field","beforeRouteEnter","to","from","next","_this2","api","getRoles","then","res","vm","$data","catch","$events","emit","notify","methods","_this3","$helpers","shortid","generate","$store","dispatch","$api","createRole","$router","push","component"],"mappings":"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","file":"js/settings_roles.676ed6ec.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roles.vue?vue&type=style&index=0&id=e25c93f6&prod&lang=scss&scoped=true\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings-roles\"},[_c('v-header',{attrs:{\"breadcrumb\":_vm.breadcrumb,\"icon-link\":(\"/\" + _vm.currentProjectKey + \"/settings\"),\"settings\":\"\"}},[_c('template',{slot:\"buttons\"},[_c('v-header-button',{key:\"add\",attrs:{\"icon\":\"add\",\"background-color\":\"button-primary-background-color\",\"icon-color\":\"button-primary-text-color\",\"label\":_vm.$t('new')},on:{\"click\":function($event){_vm.addNew = true}}})],1)],2),_c('v-table',{attrs:{\"items\":_vm.items,\"columns\":_vm.fields,\"primary-key-field\":\"collection\",\"link\":\"__link__\"}}),(_vm.addNew)?_c('portal',{attrs:{\"to\":\"modal\"}},[_c('v-prompt',{attrs:{\"confirm-text\":_vm.$t('create'),\"message\":_vm.$t('create_role'),\"placeholder\":_vm.$t('enter_role_name'),\"loading\":_vm.adding,\"required\":\"\"},on:{\"cancel\":function($event){_vm.addNew = false},\"confirm\":_vm.add},model:{value:(_vm.newName),callback:function ($$v) {_vm.newName=$$v},expression:\"newName\"}})],1):_vm._e(),_c('v-info-sidebar',{attrs:{\"wide\":\"\"}},[_c('span',{staticClass:\"type-note\"},[_vm._v(\"No settings\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"settings-roles\">\n\t\t<v-header :breadcrumb=\"breadcrumb\" :icon-link=\"`/${currentProjectKey}/settings`\" settings>\n\t\t\t<template slot=\"buttons\">\n\t\t\t\t<v-header-button\n\t\t\t\t\tkey=\"add\"\n\t\t\t\t\ticon=\"add\"\n\t\t\t\t\tbackground-color=\"button-primary-background-color\"\n\t\t\t\t\ticon-color=\"button-primary-text-color\"\n\t\t\t\t\t:label=\"$t('new')\"\n\t\t\t\t\t@click=\"addNew = true\"\n\t\t\t\t/>\n\t\t\t</template>\n\t\t</v-header>\n\t\t<v-table :items=\"items\" :columns=\"fields\" primary-key-field=\"collection\" link=\"__link__\" />\n\n\t\t<portal v-if=\"addNew\" to=\"modal\">\n\t\t\t<v-prompt\n\t\t\t\tv-model=\"newName\"\n\t\t\t\t:confirm-text=\"$t('create')\"\n\t\t\t\t:message=\"$t('create_role')\"\n\t\t\t\t:placeholder=\"$t('enter_role_name')\"\n\t\t\t\t:loading=\"adding\"\n\t\t\t\trequired\n\t\t\t\t@cancel=\"addNew = false\"\n\t\t\t\t@confirm=\"add\"\n\t\t\t/>\n\t\t</portal>\n\t\t<v-info-sidebar wide>\n\t\t\t<span class=\"type-note\">No settings</span>\n\t\t</v-info-sidebar>\n\t</div>\n</template>\n\n<script>\nimport api from '../../api';\nimport { mapState } from 'vuex';\n\nexport default {\n\tname: 'SettingsRoles',\n\tmetaInfo() {\n\t\treturn {\n\t\t\ttitle: `${this.$t('settings')} | ${this.$t('roles')}`\n\t\t};\n\t},\n\tdata() {\n\t\treturn {\n\t\t\terror: null,\n\t\t\troles: [],\n\t\t\tadding: false,\n\t\t\taddNew: false,\n\t\t\tnewName: ''\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapState(['currentProjectKey']),\n\t\tbreadcrumb() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tname: this.$t('settings'),\n\t\t\t\t\tpath: `/${this.currentProjectKey}/settings`\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: this.$t('roles'),\n\t\t\t\t\tpath: `/${this.currentProjectKey}/settings/roles`\n\t\t\t\t}\n\t\t\t];\n\t\t},\n\t\titems() {\n\t\t\treturn this.roles.map(role => ({\n\t\t\t\t...role,\n\t\t\t\t__link__: `/${this.currentProjectKey}/settings/roles/${role.id}`\n\t\t\t}));\n\t\t},\n\t\tfields() {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tfield: 'name',\n\t\t\t\t\tname: this.$t('name')\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tfield: 'description',\n\t\t\t\t\tname: this.$t('description')\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t},\n\tbeforeRouteEnter(to, from, next) {\n\t\tapi.getRoles()\n\t\t\t.then(res => res.data)\n\t\t\t.then(roles => {\n\t\t\t\tnext(vm => {\n\t\t\t\t\tvm.$data.roles = roles;\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tthis.$events.emit('error', {\n\t\t\t\t\tnotify: this.$t('something_went_wrong_body'),\n\t\t\t\t\terror\n\t\t\t\t});\n\t\t\t\tnext(vm => {\n\t\t\t\t\tvm.$data.error = error;\n\t\t\t\t});\n\t\t\t});\n\t},\n\tmethods: {\n\t\tadd() {\n\t\t\tthis.adding = true;\n\n\t\t\tconst id = this.$helpers.shortid.generate();\n\t\t\tthis.$store.dispatch('loadingStart', { id });\n\n\t\t\tthis.$api\n\t\t\t\t.createRole({\n\t\t\t\t\tname: this.newName\n\t\t\t\t})\n\t\t\t\t.then(res => res.data)\n\t\t\t\t.then(role => {\n\t\t\t\t\tthis.$store.dispatch('loadingFinished', id);\n\t\t\t\t\tthis.$router.push(`/${this.currentProjectKey}/settings/roles/${role.id}`);\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tthis.adding = false;\n\t\t\t\t\tthis.$store.dispatch('loadingFinished', id);\n\t\t\t\t\tthis.$events.emit('error', {\n\t\t\t\t\t\tnotify: this.$t('something_went_wrong_body'),\n\t\t\t\t\t\terror\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.settings-roles {\n\tpadding: var(--page-padding) var(--page-padding) var(--page-padding-bottom);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roles.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roles.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./roles.vue?vue&type=template&id=e25c93f6&scoped=true\"\nimport script from \"./roles.vue?vue&type=script&lang=js\"\nexport * from \"./roles.vue?vue&type=script&lang=js\"\nimport style0 from \"./roles.vue?vue&type=style&index=0&id=e25c93f6&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e25c93f6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}